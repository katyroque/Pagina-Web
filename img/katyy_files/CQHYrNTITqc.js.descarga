if (self.CavalryLogger) { CavalryLogger.start_js(["1Whnt"]); }

__d("ReactComposerJSONCollageLayoutData",[],(function(a,b,c,d,e,f){e.exports={1:[{validActors:3,photoLayouts:[[0,1,1,0]]}],2:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3]]},{validActors:3,photoLayouts:[[0,6,3,0],[3,6,6,0]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,6,3]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0]]}],3:[{validActors:3,photoLayouts:[[0,6,3,0],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,3,3],[3,6,6,3]]},{validActors:2,photoLayouts:[[0,2,2,0],[0,4,2,2],[0,6,2,4]]},{validActors:1,photoLayouts:[[0,6,4,0],[4,3,6,0],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,4,6,0],[0,6,3,4],[3,6,6,4]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0],[4,6,6,0]]},{validActors:1,photoLayouts:[[0,2,6,0],[0,4,6,2],[0,6,6,4]]}],4:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,6,4,0],[4,2,6,0],[4,4,6,2],[4,6,6,4]]},{validActors:3,photoLayouts:[[0,4,6,0],[0,6,2,4],[2,6,4,4],[4,6,6,4]]}],5:[{validActors:1,photoLayouts:[[0,3,3,0],[3,3,6,0],[0,6,2,3],[2,6,4,3],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,2,5,0],[3,4,5,2],[3,6,5,4]]}]}}),null);
__d("CometAlbumGridLayoutChild_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAlbumGridLayoutChild_photo",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometPhotoViewerPlaceholderPassthroughProps_photo"},{args:null,kind:"FragmentSpread",name:"CometFeedAlbumGridWarningScreen_media"}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("CometAlbumGridLayoutChild_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAlbumGridLayoutChild_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"timeline"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlay_data"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"timeline")'},{args:null,kind:"FragmentSpread",name:"VideoPlayerRelay_video"},{args:null,kind:"FragmentSpread",name:"VideoBlurBackgroundContainer_video"},{args:null,kind:"FragmentSpread",name:"CometFeedAlbumGridWarningScreen_media"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometFeedStoryAlbumAttachment_attachment.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"scale",type:"Float"}],kind:"Fragment",metadata:null,name:"CometFeedStoryAlbumAttachment_attachment",selections:[{alias:null,args:null,kind:"ScalarField",name:"mediaset_token",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:584}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[a,b,{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometAlbumGridLayoutChild_photo"}],type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:[a,b,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[b],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometAlbumGridLayoutChild_video"}],type:"Video",abstractKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'}],storageKey:null}],storageKey:"all_subattachments(first:5)"}],type:"StoryAttachment",abstractKey:null}}();e.exports=a}),null);
__d("CometFeedAlbumGridWarningScreen_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"container_story",plural:!1,selections:[a],storageKey:null},c=[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"timeline"}];return{argumentDefinitions:[{kind:"RootArgument",name:"scale",type:"Float"}],kind:"Fragment",metadata:null,name:"CometFeedAlbumGridWarningScreen_media",selections:[{alias:"viewer_image",args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[a,b,{alias:"video_cix_screen",args:c,concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{kind:"InlineFragment",selections:[{documentName:"CometFeedAlbumGridWarningScreen_media__video_cix_screen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"timeline")'}],type:"Video",abstractKey:null},{kind:"InlineFragment",selections:[a,b,{alias:"photo_cix_screen",args:c,concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{kind:"InlineFragment",selections:[{documentName:"CometFeedAlbumGridWarningScreen_media__photo_cix_screen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"timeline")'}],type:"Photo",abstractKey:null}],type:"Media",abstractKey:"__isMedia"}}();e.exports=a}),null);
__d("CometFeedAlbumGridWarningScreen.react",["CometRelay","React","CometFeedAlbumGridWarningScreen_media.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("CometRelay").MatchContainer;b("CometRelay").graphql;var i=b("CometRelay").useFragment,j=b("React");function a(a){var c,d,e=i(g!==void 0?g:g=b("CometFeedAlbumGridWarningScreen_media.graphql"),a.media),f=(e==null?void 0:e.photo_cix_screen)!=null?e==null?void 0:e.photo_cix_screen:e==null?void 0:e.video_cix_screen;c=e==null?void 0:(c=e.container_story)==null?void 0:c.id;f=f==null?void 0:f.view_model;if((e==null?void 0:(d=e.viewer_image)==null?void 0:d.uri)==null)return null;else return j.jsx(h,{match:f,props:{alwaysShowCoverComponent:!0,alwaysShowDetails:!1,alwaysUseSmallLayout:!0,contentID:e==null?void 0:e.id,data:f,mediaUri:e==null?void 0:e.viewer_image.uri,storyID:c,url:a.mediaUrl}})}e.exports=a}),null);
__d("CometFeedFocusImage.react",["CometFeedFocusMedia.react","CometImage.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={border:{bottom:"i09qtzwb",boxSizing:"rq0escxv",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",borderBottom:"linmgsc8",borderTop:"opwvks06",pointerEvents:"hzruof5a"},root:{overflowX:"ni8dbmo4",overflowY:"stjgntxs"}};function a(a){var c=a.alt,d=a.focusX,e=a.focusY,f=a.imageHeight,j=a.imageWidth,k=a.src;a=a.viewportAspectRatio;return h.jsxs("div",{className:(g||(g=b("stylex")))(i.root),children:[h.jsx(b("CometFeedFocusMedia.react"),{focusX:d,focusY:e,mediaHeight:f,mediaWidth:j,viewportAspectRatio:a,children:function(a){return h.jsx(b("CometImage.react"),{alt:c,className:(g||(g=b("stylex")))(a),src:k})}}),h.jsx("div",{className:g(i.border)})]})}e.exports=h.memo(a)}),null);
__d("ReactComposerCollageLayoutActor",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:1,PAGE:2})}),null);
__d("ReactComposerMediaAspectTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LANDSCAPE:"landscape",PORTRAIT:"portrait",SQUARE:"square",PANORAMA_TESTING_ONLY:"panorama",VERTICAL_PANORAMA_TESTING_ONLY:"vertical_panorama"})}),null);
__d("ReactComposerMediaAspect",["ReactComposerMediaAspectTypes"],(function(a,b,c,d,e,f){"use strict";e.exports={fromRect:function(a){return this._fromWidthAndHeight(a.w(),a.h())},fromDimensions:function(a){return this._fromWidthAndHeight(a[0],a[1])},_fromWidthAndHeight:function(a,c){if(a>c)return b("ReactComposerMediaAspectTypes").LANDSCAPE;else if(a<c)return b("ReactComposerMediaAspectTypes").PORTRAIT;else return b("ReactComposerMediaAspectTypes").SQUARE}}}),null);
__d("ReactComposerCollageLayoutModel",["regeneratorRuntime","ReactComposerCollageLayoutActor","ReactComposerMediaAspect"],(function(a,b,c,d,e,f){"use strict";var g=b("regeneratorRuntime").mark(i),h=b("regeneratorRuntime").mark(j);function i(a,c){var d,e;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:d=a.next();e=c.next();if(!(d.done||e.done)){b.next=5;break}return b.abrupt("break",9);case 5:b.next=7;return[d.value,e.value];case 7:b.next=0;break;case 9:case"end":return b.stop()}},g,this)}function j(a){var c,d,e,f,g;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:c=a,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){b.next=7;break}if(!(e>=c.length)){b.next=4;break}return b.abrupt("break",16);case 4:f=c[e++];b.next=11;break;case 7:e=c.next();if(!e.done){b.next=10;break}return b.abrupt("break",16);case 10:f=e.value;case 11:g=f;b.next=14;return g;case 14:b.next=1;break;case 16:case"end":return b.stop()}},h,this)}a=function(){function a(a,c){this.$1=!!(a&b("ReactComposerCollageLayoutActor").USER),this.$2=!!(a&b("ReactComposerCollageLayoutActor").PAGE),this.$3=[],c&&this.addPhotoLayouts(c)}var c=a.prototype;c.addPhotoLayout=function(a){this.$3.push(a);return this};c.addPhotoLayouts=function(a){var b=this;a.forEach(function(a){return b.$3.push(a)});return this};c.getNumPhotoLayouts=function(){return this.$3.length};c.getPhotoLayouts=function(){return this.$3};c.getIsValidForPages=function(){return this.$2};c.getIsValidForUsers=function(){return this.$1};c.getIsValidFor=function(a){switch(a){case b("ReactComposerCollageLayoutActor").USER:return this.getIsValidForUsers();case b("ReactComposerCollageLayoutActor").PAGE:return this.getIsValidForPages()}return!1};c.hasMatchingCollagePhotoLayoutType=function(a){var c=b("ReactComposerMediaAspect").fromRect(this.$3[0]);a=b("ReactComposerMediaAspect").fromDimensions(a);return c===a};c.score=function(a){var b=0;for(var a=i(j(this.getPhotoLayouts()),a.values()),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(!e)continue;var g=f.w();f=f.h();var h=e[0];e=e[1];var k=0;if(h===0||e===0)k=0;else if(g*e/h>=f){var l=g*e/h;k=(l-f)/l}else if(f*h/e>g){l=f*h/e;k=(l-g)/l}b-=k*100;e===h?b-=k*5:g>f?h>e?b+=k*25:b-=k*25:g<f?h<e?b+=k*25:b-=k*25:g===f&&(b-=k*5)}b+=200*this.getNumPhotoLayouts();return b};return a}();e.exports=a}),null);
__d("ReactComposerCollageLayoutData",["ReactComposerCollageLayoutModel","ReactComposerJSONCollageLayoutData","Rect"],(function(a,b,c,d,e,f){"use strict";var g=[];Object.keys(b("ReactComposerJSONCollageLayoutData")).forEach(function(a){b("ReactComposerJSONCollageLayoutData")[a].forEach(function(a){g.push(new(b("ReactComposerCollageLayoutModel"))(a.validActors,a.photoLayouts.map(function(a){return new(Function.prototype.bind.apply(b("Rect"),[null].concat(a)))()})))})});e.exports=g}),null);
__d("ReactComposerCollageLayoutSelection",["FBIDCheck","ReactComposerCollageLayoutActor","ReactComposerCollageLayoutData"],(function(a,b,c,d,e,f){"use strict";e.exports={MAX_NUM_COLS:6,MAX_NUM_ROWS:6,_getCollageLayoutsFor:function(a){return b("ReactComposerCollageLayoutData").filter(function(b){return b.getIsValidFor(a)})},getMaxPhotosSupported:function(){return Math.max.apply(Math,b("ReactComposerCollageLayoutData").map(function(a){return a.getNumPhotoLayouts()}))},getMaxPhotosSupportedFor:function(a){return Math.max.apply(Math,this._getCollageLayoutsFor(a).map(function(a){return a.getNumPhotoLayouts()}))},getCollageLayout:function(a,c){if(!c)return this.getBestUserCollageLayout(a);c=b("FBIDCheck").isUser_deprecated(c)?this.getBestUserCollageLayout(a):this.getBestPageCollageLayout(a);return c},getBestPageCollageLayout:function(a){if(a.size==0)return new Map();var c=a.values().next().value,d=Math.min(this.getMaxPhotosSupportedFor(b("ReactComposerCollageLayoutActor").PAGE),a.size),e=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").PAGE).filter(function(a){return a.getNumPhotoLayouts()===d});if(!e.length)throw new Error("no valid layout for these media");e=e.filter(function(a){return a.hasMatchingCollagePhotoLayoutType(c)});if(!e.length)throw new Error("no valid layout for these media starts with a suitable aspect");e=e[0];var f=new Map(),g=0;e=e.getPhotoLayouts();for(var a=a.keys(),h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var k=e[g++];k&&f.set(j,k)}return f},getBestUserCollageLayout:function(a){var c=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").USER).filter(function(b){return b.getNumPhotoLayouts()<=a.size});if(!c.length)throw new Error("no valid layout for these media");c=this._bestLayoutByScore(c,a);if(!c)throw new Error("no best layout? Should not happen!");var d=new Map(),e=0;c=c.getPhotoLayouts();for(var f=a.keys(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=c[e++];j&&d.set(i,j)}return d},_bestLayoutByScore:function(a,b){a=a.map(function(a){return[a,a.score(b)]});a=a.reduce(function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];return a===null||b>a?[d,b]:[c,a]},[null,null]);a=a[0];return a}}}),null);
__d("CometAlbumGridLayout.react",["fbt","CometFeedAlbumGridWarningScreen.react","CometFeedFocusImage.react","CometFeedUnitQueryVariablesContext","CometPressable.react","CometProductTagFunnelIDContext","CometProductTagLoggingUtils","CometRelay","CometTrackingCodeContext","CometTrackingNodeProvider.react","CometTrackingNodesContext","React","ReactComposerCollageLayoutSelection","VideoBlurBackgroundContainer.react","VideoPlayerDefaultControls.react","VideoPlayerInteractionOverlay.react","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerRelay.react","VideoPlayerSurface.react","getAggregatedStoryTrackingNodeIndex","gkx","stylex","useCometPhotoViewerPlaceholderPassthroughProps","CometAlbumGridLayoutChild_photo.graphql","CometAlbumGridLayoutChild_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=b("CometProductTagLoggingUtils").logProductTagPostClick;b("CometRelay").graphql;var l=b("CometRelay").useFragment,m=b("React");d=b("React");var n=d.useContext,o=d.useLayoutEffect,p=d.useState,q=b("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,r=b("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo,s={grid:{position:"l9j0dhe7"},gridCell:{overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"pmk7jnqg"},imageButton:{bottom:"i09qtzwb",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",":active":{transform:"tm8avpzi"}},mediaPressed:{backgroundColor:"r9n4d945"},overlay:{alignItems:"bp9cbjyn",backgroundColor:"sx5rzos5",bottom:"i09qtzwb",display:"j83agx80",end:"n7fi1qx3",flexDirection:"cbu4d94t",justifyContent:"taijpn5t",pointerEvents:"hzruof5a",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"},overlayText:{color:"qrtewk5h",fontSize:"mhxlubs3",fontWeight:"lrazzd5p",textAlign:"oqcyycmt"},root:{position:"l9j0dhe7"}},t=2,u=b("gkx")("708253");function a(a){var c=a.adID,d=a.attachments,e=a.firstItemRef,f=a.hasProductTags,g=a.initialTracePolicy,h=a.numItemsNotShown,i=a.subOrigin,k=a.urls;a=d.reduce(function(a,b,c){a.set(c,[b.width,b.height]);return a},new Map());a=b("ReactComposerCollageLayoutSelection").getBestUserCollageLayout(a);var l=Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return{attachment:d[b],columnSpan:a.getWidth(),columnStart:a.getLeft(),rowSpan:a.getHeight(),rowStart:a.getTop()}}),n=l.reduce(function(a,b){return Math.max(a,b.columnStart+b.columnSpan)},0),o=l.reduce(function(a,b){return Math.max(a,b.rowStart+b.rowSpan)},0);return m.jsx("div",{className:(j||(j=b("stylex")))(s.root),"data-testid":void 0,children:m.jsx("div",{className:j(s.grid),style:{paddingTop:"calc("+o*100+"% / "+n+")"},children:m.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:110,children:l.map(function(a,b){return m.jsx(w,{adID:c,cell:a,gridCellLength:l.length,hasProductTags:f,i:b,initialTracePolicy:g,numColumns:n,numItemsNotShown:h,numRows:o,ref:b===0?e:void 0,subOrigin:i,urls:k},(b=a.attachment)==null?void 0:b.id)})})})})}function v(a){var c=a.setPortableVideoID;a=r();var d=a.currentVideoID;o(function(){c(d)},[d,c]);return m.jsxs(b("VideoPlayerSurface.react"),{children:[m.jsx(q,{}),m.jsx(b("VideoPlayerDefaultControls.react"),{})]})}function c(a,c){var d,e,f,o,q=a.adID,r=a.cell,w=a.gridCellLength,x=a.hasProductTags,y=a.i,z=a.initialTracePolicy,A=a.numColumns,B=a.numItemsNotShown,C=a.numRows,D=a.subOrigin;a=a.urls;var E=n(b("CometTrackingCodeContext")),F=n(b("CometTrackingNodesContext")),G=n(b("CometFeedUnitQueryVariablesContext")),H=n(b("CometProductTagFunnelIDContext"));F=b("getAggregatedStoryTrackingNodeIndex")(F);d=l(h!==void 0?h:h=b("CometAlbumGridLayoutChild_photo.graphql"),(d=r.attachment)==null?void 0:d.photo);e=l(i!==void 0?i:i=b("CometAlbumGridLayoutChild_video.graphql"),(e=r.attachment)==null?void 0:e.video);f=b("useCometPhotoViewerPlaceholderPassthroughProps")({photo:d,placeholderImageSrc:(f=r.attachment)==null?void 0:f.uri});var I=p(null),J=I[0];I=I[1];var K=r.attachment;if(K==null)return null;var L=K.accessibilityCaption,M=K.focusX,N=K.focusY,O=K.height,P=K.id,Q=K.uri,R=K.url;K=K.width;L=(L=L)!=null?L:g._("Imagen en un \u00e1lbum");var S=d!=null?d==null?void 0:d.id:e==null?void 0:e.id;d=d!=null?d:e;o=(e==null?void 0:(o=e.cix_screen)==null?void 0:o.view_model)==null?"respect_user_settings":"do_not_autoplay";M=e!=null?m.jsx(b("VideoBlurBackgroundContainer.react"),{video:e,children:m.jsx(b("VideoPlayerRelay.react"),{canAutoplay:o,portalingEnabled:!0,subOrigin:(o=D)!=null?o:"media_collage",video:e,children:m.jsx(v,{setPortableVideoID:I})})}):m.jsx(b("CometFeedFocusImage.react"),{focusX:(o=M)!=null?o:.5,focusY:(I=N)!=null?I:.5,imageHeight:O,imageWidth:K,src:Q,viewportAspectRatio:r.columnSpan/r.rowSpan});o=r.columnSpan;N=r.columnStart;I=r.rowSpan;O=r.rowStart;K=B>0&&y===w-1;Q=t/2+.01;r=function(){x===!0&&S!=null&&k(q,"CometAlbumGridLayout",H,"newsfeed",S,"product_tag_on_newsfeed_"+S)};return m.jsxs("div",{className:(j||(j=b("stylex")))(s.gridCell),"data-testid":void 0,style:{bottom:"calc(("+(C-(O+I))*100+"% / "+C+") + "+(O+I<C?Q:0)+"px)",left:"calc(("+N*100+"% / "+A+") + "+(N>0?Q:0)+"px)",right:"calc(("+(A-(N+o))*100+"% / "+A+") + "+(N+o<A?Q:0)+"px)",top:"calc(("+O*100+"% / "+C+") + "+(O>0?Q:0)+"px)"},children:[m.jsxs(b("CometPressable.react"),{"aria-label":e!=null?g._("Video en un \u00e1lbum"):L,display:"block",hideHoverOverlay:!0,linkProps:{passthroughProps:babelHelpers["extends"]({index:F,initialTracePolicy:z,portableVideoID:J,productTagFunnelID:H,storyRenderLocation:G==null?void 0:G.renderLocation,subOrigin:D,trackingCode:E},f),rel:u?void 0:"theater",url:a?y<a.length?a[y]:R:R},onPress:r,overlayPressedStyle:s.mediaPressed,ref:c,xstyle:s.imageButton,children:[M,K?m.jsx("div",{className:(j||(j=b("stylex")))(s.overlay),children:m.jsx("div",{className:(j||(j=b("stylex")))(s.overlayText),children:g._("+{num}",[g._param("num",B)])})}):null]}),d&&S!=null&&m.jsx(b("CometFeedAlbumGridWarningScreen.react"),{media:d,mediaUrl:R})]},P)}var w=m.forwardRef(c);e.exports=a}),null);
__d("CometFeedStoryAlbumAttachment.react",["CometAlbumGridLayout.react","CometFeedStoryAttachmentCommandWidget","React","RelayHooks","XCometPhotoControllerRouteBuilder","XCometVideoControllerRouteBuilder","cometGetKeyCommandConfig","recoverableViolation","CometFeedStoryAlbumAttachment_attachment.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");c=b("React");var i=c.useCallback,j=c.useMemo,k=c.useRef;b("RelayHooks").graphql;var l=b("RelayHooks").useFragment;function m(){var a=k(null),c=i(function(){var b=a.current;b!=null&&b.click()},[]),d=j(function(){return[b("cometGetKeyCommandConfig")("newsfeed","openAttachment",c)]},[c]);b("CometFeedStoryAttachmentCommandWidget").useKeyCommands(d);return a}function n(a,b){var c=a==null?void 0:a.deduplication_key;if(c!=null)return c;c=a==null?void 0:(c=a.media)==null?void 0:(a=c.image)==null?void 0:a.uri;return c!=null?c:"attachment-"+b}function o(a,c){return c==null?[]:c.map(function(c,d){var e,f,g,h,i,j;e=(e=c.media)==null?void 0:e.image;var k=c==null?void 0:c.url;f=(f=c.media)==null?void 0:f.id;g=(g=c.media)==null?void 0:g.is_playable;if(e==null||k==null)return null;h=(h=c.media)==null?void 0:(h=h.owner)==null?void 0:h.id;k=k;g===!0?a!=null&&a!==""&&f!=null&&h!=null&&(k=b("XCometVideoControllerRouteBuilder").buildURL({page_token:h,set:a,story_token:f})):a!=null&&a!==""&&f!=null&&(k=b("XCometPhotoControllerRouteBuilder").buildURL({fbid:f,set:a}));h=e.height;f=e.uri;e=e.width;if(f==null||h==null||e==null)return null;d=n(c,d);i=(i=c==null?void 0:c.media)!=null?i:null;return{accessibilityCaption:(j=c.media)==null?void 0:j.accessibility_caption,focusX:(j=c.media)==null?void 0:(j=j.focus)==null?void 0:j.x,focusY:(j=c.media)==null?void 0:(c=j.focus)==null?void 0:c.y,height:h,id:d,isPlayable:g===!0,photo:(i==null?void 0:i.__typename)==="Photo"?i:null,uri:f,url:k,video:(i==null?void 0:i.__typename)==="Video"?i:null,width:e}}).filter(Boolean)}var p=g!==void 0?g:g=b("CometFeedStoryAlbumAttachment_attachment.graphql");function a(a){var c=l(p,a.attachment),d=m();if(c==null){b("recoverableViolation")("attachment cannot be nullish in CometFeedStoryAlbumAttachmentStyle","comet_feed");return null}var e=c==null?void 0:c.all_subattachments;c=c==null?void 0:c.mediaset_token;c=o(c,e==null?void 0:e.nodes);if(e==null||c.length<1){b("recoverableViolation")("subattachments cannot be nullish or empty in CometFeedStoryAlbumAttachmentStyle","comet_feed");return null}e=e.count||0;e=e===c.length?0:e-c.length+1;return h.jsxs("div",{children:[h.jsx(b("CometAlbumGridLayout.react"),{adID:a.adID,attachments:c,firstItemRef:d,hasProductTags:a.hasProductTags,initialTracePolicy:a.initialTracePolicy,numItemsNotShown:e,subOrigin:a.subOrigin,urls:a.urls}),a.productTagOverlay]})}e.exports=a}),null);